<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        *{
            box-sizing: border-box;
        }
        #main_block{
            
            position: relative;
            width:1400px;
            height:700px;
            margin:auto;
            border: solid 1px;
        }
        #block_mid{
            position: relative;
            float:left;
            width:200px;
            height: 100%;
            border: solid 1px;
        }
        #block_left{
            position: relative;
            float:left;
            width:900px;
            height: 100%;
            border: solid 1px;
        }
        #block_right{
            
            float: right;
            width: 296px;
            height: 100%;
            border: solid 1px;
            
        }
        table{
            border: solid 1px;
            width: 100%;
            height: 100%;
        }
        tr{
            border: solid 1px;
            
        }
        td{
            border: solid 1px;
        }
        .chip{
            border: solid 1px;
            height: 100px;
            width: 100%;
        }
        .box_td{
            border: solid 1px;
            height: 100px;
            width: 100px;         
        }
        #chip_text{
            height: 0px;
        }
        #chip_text>td{
            border:0px;
            height: 0px;
        }
        .chip_td{
            width: 25%;
            height:14%;
            text-align: center;
        }
        .chip_td2{
            background-size: contain;
            background-repeat: no-repeat;
            width: 50%;
            height:14%;
        }
        .text{
            position: relative;
            border: solid 1px;
            width:100%;
            height:50px;
            text-align: center;
        }
        #income{
            position: relative;
            border: solid 1px;
            width:100%;
            height:100px;
            text-align: center;
            font-size: 70px;
            font-weight: 900;
        }
        #startButton{
            position: relative;
            margin-bottom:0px;
            width: 100%;
            height:100px;
        }
        #box21,#box7{
            background-image: url("img/drink5.jpg");
            background-size:contain;
            background-repeat: no-repeat;
        }
        #box3,#box6,#box10,#box13,#box19,#box22,#box25{
            background-image: url("img/drink1.jpg");
            background-size:contain;
            background-repeat: no-repeat;
        }
        #box5,#box24,#box17{
            background-image: url("img/drink4.jpg");
            background-size:contain;
            background-repeat: no-repeat;
        }
        #box0,#box9,#box12,#box15{
            background-image: url("img/drink2.jpg");
            background-size:contain;
            background-repeat: no-repeat;
        }
        #box11{
            background-image: url("img/drink7.jpg");
            background-size:contain;
            background-repeat: no-repeat;
        }
        #box2,#box8,#box16,#box20{
            background-image: url("img/drink3.jpg");
            background-size:contain;
            background-repeat: no-repeat;
        }
        #box1,#box4,#box23,#box14,#box18{
            background-image: url("img/drink6.jpg");
            background-size:contain;
            background-repeat: no-repeat;
        }
        .chip_button{
            width: 100%;
            height: 50%;
            font-size: 35px;
        }
    </style>
</head>
<body style="background-image: url('')">
    <!-- 主區塊 -->
    <div id="main_block"> 
            <!-- 左方轉盤區 -->
        <div id="block_left">
            <table>
                <tr>
                    <td id="box0" class="box_td">0</td>
                    <td id="box1" class="box_td">1</td>
                    <td id="box2" class="box_td">2</td>
                    <td id="box3" class="box_td">3</td>
                    <td id="box4" class="box_td">4</td>
                    <td id="box5" class="box_td">5</td>
                    <td id="box6" class="box_td">6</td>
                    <td id="box7" class="box_td">7</td>
                    <td id="box8" class="box_td">8</td>
        
                </tr>
                <tr>
                    <td id="box25" class="box_td">25</td>
                    <td colspan="7" rowspan="4" class="box_td"></td>
                    <td id="box9" class="box_td">9</td>
                </tr>
                <tr>
                    <td id="box24" class="box_td">24</td>
                    <td id="box10" class="box_td">10</td>
                </tr>
                <tr>
                    <td id="box23" class="box_td">23</td>
                    <td id="box11" class="box_td">11</td>
                </tr>
                <tr>
                    <td id="box22" class="box_td">22</td>
                    <td id="box12" class="box_td">12</td>
                </tr>
                <tr>
                    <td id="box21" class="box_td">21</td>
                    <td id="box20" class="box_td">20</td>
                    <td id="box19" class="box_td">19</td>
                    <td id="box18" class="box_td">18</td>
                    <td id="box17" class="box_td">17</td>
                    <td id="box16" class="box_td">16</td>
                    <td id="box15" class="box_td">15</td>
                    <td id="box14" class="box_td">14</td>
                    <td id="box13" class="box_td">13</td>
                </tr>
        
            </table>
        </div>
        <!-- 中央投注區 -->
        <div id="block_mid">
            <table>
                
                <tr>
                    <td class="chip_td">
                        <input type="button" class="chip_button" value="↑" onclick="chip_add(0,true)">
                        <input type="button" class="chip_button" value="↓" onclick="chip_add(0,false)">
                    </td>
                    <td colspan="2" class="chip_td2" style="background-image: url('img/drink1.jpg');">           
                    </td>
                    <td  id="chipValue0" class="chip_td">0</td>
                </tr>
                <tr>
                    <td class="chip_td">
                        <input type="button" class="chip_button" value="↑" onclick="chip_add(1,true)">
                        <input type="button" class="chip_button" value="↓" onclick="chip_add(1,false)"></td>
                    <td colspan="2" class="chip_td2" style="background-image: url('img/drink2.jpg');"></td>
                    <td  id="chipValue1" class="chip_td">0</td>
                </tr><tr>
                    <td class="chip_td">
                            <input type="button" class="chip_button" value="↑" onclick="chip_add(2,true)">
                            <input type="button" class="chip_button" value="↓" onclick="chip_add(2,false)">
                    </td>
                    <td colspan="2" class="chip_td2" style="background-image: url('img/drink3.jpg');"></td>
                    <td  id="chipValue2" class="chip_td">0</td>
                </tr><tr>
                    <td class="chip_td">
                            <input type="button" class="chip_button" value="↑" onclick="chip_add(3,true)">
                            <input type="button" class="chip_button" value="↓" onclick="chip_add(3,false)">
                    </td>
                    <td colspan="2" class="chip_td2" style="background-image: url('img/drink4.jpg');"></td>
                    <td  id="chipValue3" class="chip_td">0</td>
                </tr><tr>
                    <td class="chip_td">
                            <input type="button" class="chip_button" value="↑" onclick="chip_add(4,true)">
                            <input type="button" class="chip_button" value="↓" onclick="chip_add(4,false)">
                    </td>
                    <td colspan="2" class="chip_td2" style="background-image: url('img/drink5.jpg');"></td>
                    <td  id="chipValue4" class="chip_td">0</td>
                </tr><tr>
                    <td class="chip_td">
                            <input type="button" class="chip_button" value="↑" onclick="chip_add(5,true)">
                            <input type="button" class="chip_button" value="↓" onclick="chip_add(5,false)">
                    </td>
                    <td colspan="2" class="chip_td2" style="background-image: url('img/drink6.jpg');"></td>
                    <td  id="chipValue5" class="chip_td">0</td>
                </tr><tr>
                    <td class="chip_td">
                            <input type="button" class="chip_button" value="↑" onclick="chip_add(6,true)">
                            <input type="button" class="chip_button" value="↓" onclick="chip_add(6,false)">
                    </td>
                    <td colspan="2" class="chip_td2" style="background-image: url('img/drink7.jpg');"></td>
                    <td id="chipValue6" class="chip_td">0</td>
                </tr>
            </table>
        </div>
        <!-- 右方顯示區 -->
        <div id=block_right>
            <div class="text">本輪得分</div>
            <div id="income">500 point</div>
            <input id="startButton" type="button" onclick="start()" value="start">
        </div>
    </div>
    <!-- 音效 -->
    <audio id="sound">
            <!-- <source  src="sound/select04.mp3" type="audio/mp3"> -->
    </audio>
    <script>
        let i;          //轉動次數計數器
        let speedUp;    //是否加速判斷值
        let rand;       //轉盤隨機數
        let idCount=0   //轉盤變色id碼
        let chip=new Array;
        //點擊按鈕初始化及開始
        function start(){
            let startButton=document.getElementById("startButton");//開始按鈕
            let sound = document.getElementById("sound"); //音效檔
            let income=document.getElementById("income");//本輪獲得分數
            startButton.disabled=true;      //按鈕disabled
            rand=parseInt(Math.random()*26)+40;     
            speedUp=false;  
            i=0;
                runGame(rand);           
        }
        //轉盤轉動事件
        function runGame(rand){
            
            if(i>=rand){
                speedUp=true;
            }
            (speedUp?i--:i++)
            console.log(speedUp);
            console.log(i);
            console.log(rand);
            
            //停止轉動
            if(i<0){
                stop();
                return;
            }
            idCount++;
            changeColor();
            setTimeout(function(){sound.currentTime=0;sound.play();runGame(rand);},(1500/i+20));
            
        }
        function stop(){
            startButton.disabled=false;     //釋放按鈕
                income_coin();              //呼叫結算分數income_coin()

                for(let i=0;i<7;i++){
                let chipId="chipValue"+i;
                document.getElementById(chipId).innerText=0;
            }
        }

        //轉盤顏色變更
        function changeColor(){
            let getIdNow="box"+(idCount%26);
            let getIdLast="box"+((idCount+25)%26);
            console.log("now="+getIdNow);
            console.log("last="+getIdLast);
            let lastStyle=document.getElementById(getIdLast).style;
            let nowStyle=document.getElementById(getIdNow).style
            nowStyle.borderColor="red";
            nowStyle.borderWidth="5px";
            lastStyle.borderColor="black";
            lastStyle.borderWidth="1px";
        }
        //轉盤結束後計算得分
        function income_coin(){
            
            for(let i=0;i<7;i++){
                let chipId="chipValue"+i;
                chip[i]=parseInt(document.getElementById(chipId).innerText);
            }
            
            switch (idCount % 26) {
                case 3: case 6: case 10: case 13: case 19: case 22: case 25:
                income.innerHTML=chip[0]*5+" point";
                    break;
                case 1: case 4: case 23: case 14: case 18:
                income.innerHTML=chip[5]*10+" point";
                    break;
                case 0: case 9: case 12: case 15:
                income.innerHTML=chip[1]*15+" point";
                    break;
                case 2: case 8: case 16: case 20:
                income.innerHTML=chip[2]*20+" point";
                    break;
                case 5: case 24: case 17:
                income.innerHTML=chip[3]*30+" point";
                    break;
                case 21: case 7:
                income.innerHTML=chip[4]*50+" point";
                    break;
                case 11:
                income.innerHTML=chip[6]*80+" point";
                    break;
            }
        }
        //籌碼加減方法
        function chip_add(idValue,isAdd){
            let chipId="chipValue"+idValue;
            let chipCount=parseInt(document.getElementById(chipId).innerText);
            if(isAdd){
                chipCount++;
                document.getElementById(chipId).innerText=chipCount;
            }else if(chipCount>0){
                chipCount--;
                document.getElementById(chipId).innerText=chipCount;
            }else{
                return;
            }
            
        }
    </script>
</body>
</html> 