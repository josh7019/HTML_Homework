<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>My Calculator</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <link rel="stylesheet" href="css/caculate.css">
    <style></style>
</head>

<body>

   <p><a href="https://www.desmos.com/scientific" target="_blank">參考網路上面的計算機</a></p>
    <div id="caculate">
        <!-- 計算機顯示區 -->
        <div id="caculate_top">
            <div id="answer"></div>
            <div id="answer_history"></div>
        </div>
        <!-- 計算機按鈕區 -->
        <div id="caculate_bottom">
            <!-- 右邊按鈕區 -->
            <div id="button_right">
                    <div class="bottom_line2">
                            <input type="button" value="+" onclick="button_Arithmetic('+')">
                            <input type="button" value="－" onclick="button_Arithmetic('-')">
                    </div>
                    <div class="bottom_line2">
                            <input type="button" value="x " onclick="button_Arithmetic('*')">
                            <input type="button" value="/" onclick="button_Arithmetic('/')">
                    </div>
                    <div class="bottom_line2">
                            <input type="button" value="del" onclick="button_del()">
                            <input type="button" value="C" onclick="button_cancel()" >
                    </div>
            </div><!-- 右邊按鈕區結束 -->
            <!-- 左邊按鈕區 -->
            <div id=button_left>
                <div class="bottom_line">
                    <input type="button" value="1" onclick="button_number(1)">
                    <input type="button" value="2" onclick="button_number(2)">
                    <input type="button" value="3" onclick="button_number(3)">
                </div>
                <div class="bottom_line">
                    <input type="button" value="4" onclick="button_number(4)">
                    <input type="button" value="5" onclick="button_number(5)">
                    <input type="button" value="6" onclick="button_number(6)">
                </div>
                <div class="bottom_line">
                    <input type="button" value="7" onclick="button_number(7)">
                    <input type="button" value="8" onclick="button_number(8)">
                    <input type="button" value="9" onclick="button_number(9)">
                </div>
                <div class="bottom_line">
                        <input type="button" value="0" onclick="button_number(0)">
                        <input type="button" value="." onclick="button_number('.')">
                        <input type="button" value="=" onclick="button_caculate()">
                </div>
            </div><!-- 左邊按鈕區結束 -->
            <!-- 右邊按鈕區 -->
            
            
        </div><!-- 計算機按鈕區結束 -->
    </div>
    <script>
        
        
        // 數字鈕
        function button_number(input_number){
        
            if($("#answer").html().length>=16){
                alert("不得大於16位數")
            }else{
                $("#answer").html($("#answer").html()+input_number);
            }            
        }
        
        //四則運算符號
        function button_Arithmetic(input_Arithmetic){
            if($("#answer").html().length>=16){
                alert("不得大於16位數")
            }else{
                //alert($("#answer").html().substring($("#answer").html().length-1,$("#answer").html().length))
                //檢查最後字元是否為運算符號
                var patt=/[+*-/%]/;
                var match_answer=patt.test($("#answer").html().substring($("#answer").html().length-1,$("#answer").html().length));
                
                if(match_answer==false){
                    $("#answer").html($("#answer").html()+input_Arithmetic);
                }
                
            } 
        }
        //等於按鈕
        function button_caculate(){
            
            if($("#answer").html().length>0){
                
                var fn=$("#answer").html();
                //$("#answer_history").html(fn+$("#answer_history").html(fn+"="+eval(fn)+"<br>"));
                $("#answer").html(eval(fn));
            }
        }
        //del按鈕
        function button_del (){
            if($("#answer").html().length>0){
                
                var fn=$("#answer").html();
                $("#answer").html(fn.substring(0,$("#answer").html().length-1));
            }
        }

        //取消按鈕
        function button_cancel(){
            $("#answer").html("")
        }
    </script>



</body>

</html>
